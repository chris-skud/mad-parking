/*! grunt generated 2014-04-04 */function ParkingMap(){}ParkingMap.prototype.renderMap=function(a,b){this._mapDivId=a,this._parkingData=b,this.initializeMap(),this.setMapMarkers(),this.setCurrentLocationMarker()},ParkingMap.prototype.initializeMap=function(){var a={zoom:14,center:new google.maps.LatLng(43.067,-89.387),mapTypeId:google.maps.MapTypeId.ROADMAP};this._map=new google.maps.Map(document.getElementById("map-canvas"),a)},ParkingMap.prototype.setCurrentLocationMarker=function(){var a,b=new Boolean;navigator.geolocation?(b=!0,console.log("the map object: "+this._map),navigator.geolocation.getCurrentPosition(function(){a=new google.maps.LatLng(43.067,-89.387),console.log("the map object: "+this._map),marker=new google.maps.Marker({position:a,map:this._map,content:"Your location"})},function(){this.handleNoGeolocation(b)})):(b=!1,this.handleNoGeolocation(b))},ParkingMap.prototype.handleNoGeolocation=function(a){var b;b=1==a?new google.maps.LatLng(43.0728,-89.3885):new google.maps.LatLng(60,105),this._map.setCenter(b)},ParkingMap.prototype.setMarkerIcon=function(a){return a>50?"img/green.png":a>0?"img/yellow.png":"img/red.png"},ParkingMap.prototype.setMapMarkers=function(){var a,b=new google.maps.InfoWindow,c=new google.maps.Geocoder;if(this._parkingData)for(var d=0;d<this._parkingData.length;d++)"[object Array]"===Object.prototype.toString.call(this._parkingData[d].address)&&(this._parkingData[d].address=this._parkingData[d].address[0]),function(e,f,g){c.geocode({address:f[d].address+", Madison, WI"},function(c,d){d==google.maps.GeocoderStatus.OK?(a=new google.maps.Marker({position:c[0].geometry.location,map:g._map,title:f[e].name,icon:g.setMarkerIcon(f[e].open_spots)}),google.maps.event.addListener(a,"click",function(a,c){return function(){b.setContent(f[c].name+"<br/>"+f[c].address+"</br>"+f[c].open_spots+" of "+f[c].total_spots+" spots remaining"),b.open(g._map,a)}}(a,e))):alert("Geocode was not successful for the following reason: "+d)})}(d,this._parkingData,this);else alert("There was an issue retrieving the parking data from Madison City Data.  please reload or try back later.")};